TRANSLATIONS = {
    'en': {
        # Welcome & Setup
        'welcome': "Welcome to Love in Rainbow Colours 🌈!\n\nThis bot helps you strengthen relationships through daily rainbow-themed challenges.",
        'choose_mode': "Choose your mode:",
        'individual_mode': "Individual 👤",
        'couple_mode': "Couple 💑",
        'group_mode': "Group 👥",
        'choose_language': "Choose your language:",
        'setup_complete': "Great! You're all set up! 🎉\n\nYou'll receive daily rainbow challenges at 9 AM your time.\n\nUse /help to see all commands.",
        
        # Mode descriptions
        'individual_desc': "Personal growth and self-reflection",
        'couple_desc': "Connect with your partner through shared challenges",
        'group_desc': "Build collective rainbow with friends",
        
        # Daily prompts
        'daily_challenge': "🌈 Today's Rainbow Challenge",
        'color_theme': "{emoji} {color} = {theme}",
        'challenge_prompt': "Challenge: {title}\n\n{description}",
        'respond_prompt': "Reply with text, photo, or voice message to complete this challenge!",
        
        # Progress & Streaks
        'rainbow_progress': "Your Rainbow Progress:",
        'streak_count': "🔥 Streak: {days} days",
        'points_earned': "Points earned: +{points} {type}",
        'badge_earned': "🏆 New Badge: {badge}!",
        
        # Couple Mode
        'create_room': "Creating couple room...",
        'room_code': "Share this code with your partner: `{code}`",
        'join_room_prompt': "Enter the room code from your partner:",
        'room_joined': "💑 Successfully connected! You're now in couple mode.",
        'partner_responded': "💕 Your partner just completed the challenge!",
        'waiting_partner': "Waiting for your partner to respond...",
        
        # Group Mode
        'group_welcome': "Rainbow Bot activated for this group! 🌈",
        'group_challenge': "🌈 Group Challenge of the Day",
        'members_completed': "{count}/{total} members completed today's challenge",
        'collective_progress': "Collective Rainbow: {progress}",
        
        # Commands
        'help_text': """
🌈 **Available Commands:**

/start - Begin your rainbow journey
/challenge - Get today's challenge
/progress - View your rainbow progress
/streak - Check your current streak
/badges - See your earned badges
/suggest - Suggest a new challenge
/settings - Change language or mode
/couple - Couple mode options
/save - Save current session
/resume - Resume saved session
/help - Show this help message
        """,
        
        # Settings
        'settings_menu': "⚙️ Settings",
        'change_language': "Change Language",
        'change_mode': "Change Mode",
        'change_timezone': "Change Timezone",
        'current_settings': "Current: {setting}",
        
        # Responses
        'response_saved': "✅ Response saved! Well done!",
        'challenge_completed': "🎉 Challenge completed!",
        'already_completed': "You've already completed today's challenge! Come back tomorrow.",
        'session_saved': "💾 Session saved! Use /resume to continue later.",
        'session_resumed': "📂 Session resumed! Continue where you left off.",
        'no_session': "No saved session found.",
        
        # Suggestions
        'suggest_prompt': "Share your challenge idea:\n\nFormat:\nColor: (red/orange/yellow/green/blue/indigo/violet)\nTitle: Your challenge title\nDescription: Challenge description",
        'suggestion_received': "Thank you for your suggestion! 💡",
        
        # Errors
        'error_occurred': "An error occurred. Please try again.",
        'invalid_code': "Invalid room code. Please check and try again.",
        'not_in_couple': "You're not in couple mode. Use /couple to connect with a partner.",
        'already_in_couple': "You're already connected with a partner.",
        
        # Buttons
        'btn_complete': "✅ Complete",
        'btn_skip': "⏭️ Skip",
        'btn_save': "💾 Save for Later",
        'btn_new': "🆕 Start New",
        'btn_share': "📤 Share",
        'btn_back': "⬅️ Back"
    },
    
    'zh': {
        # Welcome & Setup
        'welcome': "欢迎来到彩虹之恋 🌈!\n\n这个机器人通过每日彩虹主题挑战帮助您加强关系。",
        'choose_mode': "选择您的模式：",
        'individual_mode': "个人 👤",
        'couple_mode': "情侣 💑",
        'group_mode': "群组 👥",
        'choose_language': "选择您的语言：",
        'setup_complete': "太好了！设置完成！🎉\n\n您将在每天上午9点收到彩虹挑战。\n\n使用 /help 查看所有命令。",
        
        # Mode descriptions
        'individual_desc': "个人成长与自我反思",
        'couple_desc': "通过共同挑战与伴侣连接",
        'group_desc': "与朋友一起建立集体彩虹",
        
        # Daily prompts
        'daily_challenge': "🌈 今日彩虹挑战",
        'color_theme': "{emoji} {color} = {theme}",
        'challenge_prompt': "挑战：{title}\n\n{description}",
        'respond_prompt': "回复文字、照片或语音消息来完成这个挑战！",
        
        # Progress & Streaks
        'rainbow_progress': "您的彩虹进度：",
        'streak_count': "🔥 连续：{days} 天",
        'points_earned': "获得积分：+{points} {type}",
        'badge_earned': "🏆 新徽章：{badge}！",
        
        # Couple Mode
        'create_room': "创建情侣房间...",
        'room_code': "与您的伴侣分享此代码：`{code}`",
        'join_room_prompt': "输入您伴侣的房间代码：",
        'room_joined': "💑 成功连接！您现在处于情侣模式。",
        'partner_responded': "💕 您的伴侣刚刚完成了挑战！",
        'waiting_partner': "等待您的伴侣回应...",
        
        # Group Mode
        'group_welcome': "彩虹机器人已为此群组激活！🌈",
        'group_challenge': "🌈 今日群组挑战",
        'members_completed': "{count}/{total} 成员完成了今天的挑战",
        'collective_progress': "集体彩虹：{progress}",
        
        # Commands
        'help_text': """
🌈 **可用命令：**

/start - 开始您的彩虹之旅
/challenge - 获取今日挑战
/progress - 查看您的彩虹进度
/streak - 检查您的连续记录
/badges - 查看您获得的徽章
/suggest - 建议新挑战
/settings - 更改语言或模式
/couple - 情侣模式选项
/save - 保存当前会话
/resume - 恢复保存的会话
/help - 显示此帮助信息
        """,
        
        # Settings
        'settings_menu': "⚙️ 设置",
        'change_language': "更改语言",
        'change_mode': "更改模式",
        'change_timezone': "更改时区",
        'current_settings': "当前：{setting}",
        
        # Responses
        'response_saved': "✅ 回应已保存！做得好！",
        'challenge_completed': "🎉 挑战完成！",
        'already_completed': "您已经完成了今天的挑战！明天再来。",
        'session_saved': "💾 会话已保存！使用 /resume 稍后继续。",
        'session_resumed': "📂 会话已恢复！从上次离开的地方继续。",
        'no_session': "未找到保存的会话。",
        
        # Suggestions
        'suggest_prompt': "分享您的挑战想法：\n\n格式：\n颜色：（红/橙/黄/绿/蓝/靛/紫）\n标题：您的挑战标题\n描述：挑战描述",
        'suggestion_received': "感谢您的建议！💡",
        
        # Errors
        'error_occurred': "发生错误。请重试。",
        'invalid_code': "无效的房间代码。请检查并重试。",
        'not_in_couple': "您不在情侣模式。使用 /couple 与伴侣连接。",
        'already_in_couple': "您已经与伴侣连接。",
        
        # Buttons
        'btn_complete': "✅ 完成",
        'btn_skip': "⏭️ 跳过",
        'btn_save': "💾 稍后保存",
        'btn_new': "🆕 开始新的",
        'btn_share': "📤 分享",
        'btn_back': "⬅️ 返回"
    }
}

def get_text(language: str, key: str, **kwargs) -> str:
    """Get translated text with optional formatting"""
    text = TRANSLATIONS.get(language, TRANSLATIONS['en']).get(key, key)
    if kwargs:
        text = text.format(**kwargs)
    return text
